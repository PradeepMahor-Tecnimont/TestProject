let __aryDeskMoc1FirstFloor = ["ZE001", "ZE002", "ZE003", "ZE004", "ZE005", "ZE006", "ZE007", "ZE008", "ZE009", "ZE010", "ZE011", "ZE012", "ZE013", "ZE014", "ZE015", "ZE016", "ZE017", "ZE018", "ZE019", "ZE020", "ZE021", "ZE022", "ZE023", "ZE024", "ZE025", "ZE026", "ZE027", "ZE028", "ZE029", "ZE030", "ZE031", "ZE032", "ZE033", "ZE034", "ZE035", "ZE036", "ZE037", "ZE038", "ZE039", "ZE040", "ZE041", "ZE042", "ZE043", "ZE044", "ZE045", "ZE046", "ZE047", "ZE048", "ZE049", "ZE050", "ZE051", "ZE052", "ZE053", "ZE054", "ZE055", "ZE056", "ZE057", "ZE058", "ZE059", "ZE060", "ZE061", "ZE062", "ZE063", "ZE064", "ZE065", "ZE066", "ZE067", "ZE068", "ZE069", "ZE070", "ZE071", "ZE072", "ZE073", "ZE074", "ZE075", "ZE076", "ZE077", "ZE078", "ZE079", "ZE080", "ZE081", "ZE082", "ZE083", "ZE084", "ZE085", "ZE086", "ZE087", "ZE088", "ZE089", "ZE090", "ZE091", "ZE092", "ZE093", "ZE094", "ZE095", "ZE096", "ZE097", "ZE098", "ZE099", "ZE100", "ZE101", "ZE102", "ZE103", "ZE104", "ZE105", "ZE106", "ZE107", "ZE108", "ZE109", "ZE110", "ZE111", "ZE112", "ZE113", "ZF001", "ZF002", "ZF003", "ZF004", "ZF005", "ZF006", "ZF007", "ZF008", "ZF009", "ZF010", "ZF011", "ZF012", "ZF013", "ZF014", "ZF015", "ZF016", "ZF017", "ZF018", "ZF019", "ZF020", "ZF021", "ZF022", "ZF023", "ZF024", "ZF025", "ZF026", "ZF027", "ZF028", "ZF029", "ZF030", "ZF031", "ZF032", "ZF033", "ZF034", "ZF035", "ZF036", "ZF037", "ZF038", "ZF039", "ZF040", "ZF041", "ZF042", "ZF043", "ZF044", "ZF045", "ZF046", "ZF047", "ZF048", "ZF049", "ZF050", "ZF051", "ZF052", "ZF053", "ZF054", "ZF055", "ZF056", "ZF057", "ZF058", "ZF059", "ZF060", "ZF061", "ZF062", "ZF063", "ZF064", "ZF065", "ZF066", "ZF067", "ZF068", "ZF069", "ZF070", "ZF071", "ZF072", "ZF073", "ZF074", "ZF075", "ZF076", "ZF077", "ZF078", "ZD001", "ZD002", "ZD003", "ZD004", "ZD005", "ZD006", "ZD007", "ZD008", "ZD009", "ZD010", "ZD011", "ZD012", "ZD013", "ZD014", "ZD015", "ZD016", "ZD017", "ZD018", "ZD019", "ZD020", "ZD021", "ZD022", "ZD023", "ZD024", "ZD025", "ZD026", "ZD027", "ZD028", "ZD029", "ZD030", "ZD031", "ZD032", "ZD033", "ZD034", "ZD035", "ZD036", "ZD037", "ZD038", "ZD039", "ZD040", "ZD041", "ZD042", "ZD043", "ZD044", "ZD045", "ZD046", "ZD047", "ZD048", "ZD049", "ZD050", "ZD051", "ZD052", "ZD053", "ZD054", "ZD055", "ZD056", "ZD057", "ZD058", "ZD059", "ZD060", "ZD061", "ZD062", "ZD063", "ZD064", "ZD065", "ZD066", "ZD067", "ZD068", "ZD069", "ZD070", "ZD071", "ZD072", "ZD073", "ZD074", "ZD075", "ZD076", "ZD077", "ZD078", "ZD079", "ZD080", "ZD081", "ZD082", "ZD083", "ZD084", "ZD085", "ZD086", "ZD087", "ZD088", "ZD089", "ZD090", "ZD091", "ZD092", "ZD093", "ZD094", "ZD095", "ZD096", "ZD097", "ZD098", "ZD099", "ZD100", "ZD101", "ZD102", "ZD103", "ZD104", "ZD105", "ZD106", "ZD107", "ZD108", "ZD109", "ZD110", "ZD111", "ZD112", "ZD113", "ZD114", "ZD115", "ZD116", "ZD117", "ZD118", "ZD119", "ZD120", "ZD121", "ZD122", "ZD123", "ZD124", "ZD125", "ZD126", "ZD127", "ZD128", "ZD129", "ZD130", "ZD131", "ZD132", "ZD133", "ZD134", "ZD135", "ZD136", "ZD137", "ZD138", "ZD139", "ZD140", "ZD141", "ZD142", "ZD143", "ZD144", "ZD145", "ZD146", "ZDC01", "ZDC02", "ZDC03", "ZDC04", "ZDC05", "ZDC06", "ZF079", "ZF080", "ZF081", "ZF082", "ZF083", "ZF084", "ZF085", "ZF086", "ZF087", "ZF088", "ZF089", "ZF090", "ZF091", "ZF092", "ZF093", "ZF094", "ZF095", "ZF096", "ZF097", "ZF098", "ZF099", "ZF100", "ZF101", "ZF102", "ZF103", "ZF104", "ZF105", "ZF106", "ZF107", "ZF108", "ZF109", "ZF110", "ZF111", "ZF112", "ZF113", "ZF114", "ZF115", "ZF116", "ZF117", "ZF118", "ZF119", "ZF120", "ZF121", "ZF122", "ZF123", "ZF124", "ZF125", "ZF126", "ZF127", "ZF128", "ZF129", "ZF130", "ZF131", "ZF132", "ZF133", "ZF134", "ZF135", "ZF136", "ZF137", "ZF138", "ZF139", "ZF140", "ZF141", "ZF142", "ZF143", "ZF144", "ZF145", "ZF146", "ZF147", "ZF148", "ZF149", "ZF150", "ZF151", "ZF152", "ZF153", "ZF154", "ZEM01", "ZEM02", "ZEC01", "ZEC02", "ZEC03", "ZEC04", "ZAM03", "ZCM02", "ZDM01", "ZDM02", "ZDM03", "ZA001", "ZA002", "ZA003", "ZA004", "ZA005", "ZA006", "ZA007", "ZA008", "ZA009", "ZA010", "ZA011", "ZA012", "ZA013", "ZA014", "ZA015", "ZA016", "ZA017", "ZA018", "ZA019", "ZA020", "ZA021", "ZA022", "ZA023", "ZA024", "ZA025", "ZA026", "ZA027", "ZA028", "ZA029", "ZA030", "ZA031", "ZA032", "ZA033", "ZA034", "ZA035", "ZA036", "ZA037", "ZA038", "ZA039", "ZA040", "ZA041", "ZA042", "ZA043", "ZA044", "ZA045", "ZA046", "ZA047", "ZA048", "ZA049", "ZA050", "ZA051", "ZA052", "ZA053", "ZA054", "ZA055", "ZA056", "ZA057", "ZA058", "ZA059", "ZA060", "ZA061", "ZA062", "ZA063", "ZA064", "ZA065", "ZA066", "ZA067", "ZA068", "ZA069", "ZA070", "ZA071", "ZA072", "ZA073", "ZA074", "ZA075", "ZA076", "ZA077", "ZA078", "ZA079", "ZA080", "ZA081", "ZA082", "ZA083", "ZA084", "ZA085", "ZA086", "ZA087", "ZA088", "ZA089", "ZA090", "ZA091", "ZA092", "ZA093", "ZA094", "ZA095", "ZA096", "ZA097", "ZA098", "ZA099", "ZA100", "ZA101", "ZA102", "ZA103", "ZA104", "ZA105", "ZA106", "ZA107", "ZA108", "ZA109", "ZA110", "ZA111", "ZA112", "ZA113", "ZA114", "ZA115", "ZA116", "ZA117", "ZB001", "ZB002", "ZB003", "ZB004", "ZB005", "ZB006", "ZB007", "ZB008", "ZB009", "ZB010", "ZB011", "ZB012", "ZB013", "ZB014", "ZB015", "ZB016", "ZB017", "ZB018", "ZB019", "ZB020", "ZB021", "ZB022", "ZB023", "ZB024", "ZB025", "ZB026", "ZB027", "ZB028", "ZB029", "ZB030", "ZB031", "ZB032", "ZB033", "ZB034", "ZB035", "ZB036", "ZB037", "ZB038", "ZB039", "ZB040", "ZB041", "ZB042", "ZB043", "ZB044", "ZB045", "ZB046", "ZB047", "ZB048", "ZB049", "ZB050", "ZB051", "ZB052", "ZB053", "ZB054", "ZB055", "ZB056", "ZB057", "ZB058", "ZB059", "ZB060", "ZB061", "ZB062", "ZB063", "ZB064", "ZB065", "ZB066", "ZB067", "ZB068", "ZB069", "ZB070", "ZB071", "ZB072", "ZB073", "ZB074", "ZB075", "ZB076", "ZB077", "ZB078", "ZB079", "ZB080", "ZB081", "ZB082", "ZB083", "ZB084", "ZB085", "ZB086", "ZB087", "ZB088", "ZB089", "ZB090", "ZB091", "ZB092", "ZB093", "ZB094", "ZB095", "ZB096", "ZB097", "ZB098", "ZB099", "ZB100", "ZB101", "ZB102", "ZB103", "ZB104", "ZB105", "ZB106", "ZB107", "ZB108", "ZB109", "ZB110", "ZB111", "ZC001", "ZC002", "ZC003", "ZC004", "ZC005", "ZC006", "ZC007", "ZC008", "ZC009", "ZC010", "ZC011", "ZC012", "ZC013", "ZC014", "ZC015", "ZC016", "ZC017", "ZC018", "ZC019", "ZC020", "ZC021", "ZC022", "ZC023", "ZC024", "ZC025", "ZC026", "ZC027", "ZC028", "ZC029", "ZC030", "ZC031", "ZC032", "ZC033", "ZC034", "ZC035", "ZC036", "ZC037", "ZC038", "ZC039", "ZC040", "ZC041", "ZC042", "ZC043", "ZC044", "ZC045", "ZC046", "ZC047", "ZC048", "ZC049", "ZC050", "ZC051", "ZC052", "ZC053", "ZC054", "ZC055", "ZC056", "ZC057", "ZC058", "ZC059", "ZC060", "ZC061", "ZC062", "ZC063", "ZC064", "ZC065", "ZC066", "ZC067", "ZC068", "ZC069", "ZC070", "ZC071", "ZC072", "ZC073", "ZC074", "ZC075", "ZC076", "ZC077", "ZC078", "ZC079", "ZC080", "ZC081", "ZC082", "ZC083", "ZC084", "ZC085", "ZC086", "ZC087", "ZC088", "ZC089", "ZC090", "ZC091", "ZC092", "ZC093", "ZC094", "ZC095", "ZC096", "ZC097", "ZC098", "ZC099", "ZC100", "ZC101", "ZC102", "ZC103", "ZC104", "ZC105", "ZC106", "ZC107", "ZC108", "ZC109", "ZC110", "ZC111", "ZC112", "ZC113", "ZC114", "ZC115", "ZC116", "ZC117", "ZC118", "ZC119", "ZC120", "ZC121", "ZC122", "ZC123", "ZC124", "ZC125", "ZC126", "ZC127", "ZC128", "ZC129", "ZC130", "ZC131", "ZC132", "ZC133", "ZC134", "ZC135", "ZC136", "ZC137", "ZC138", "ZC139", "ZC140", "ZC141", "ZC142", "ZC143", "ZC144", "ZC145", "ZC146", "ZC147", "ZC148", "ZC149", "ZC150", "ZAC01", "ZAC02", "ZAC03", "ZAM01", "ZAM02", "ZBM01", "ZBM02", "ZBM03", "ZCM01"];
//let __aryDeskNotFound = ["FE061", "FE113", "FE114", "FE115", "FE116", "FW172", "FW054", "FW063", "FW084", "FW090", "FW091", "FW092", "FW093", "FW103", "FW114", "FW115", "FW134", "FW203", "FW135", "FE189", "FW185", "FW186", "FW138", "FE023", "FW117", "FW001", "FE134", "FE135", "FW178", "FE190", "FW037", "FW118", "FW204", "FE060", "FW183", "FW078"];
//let __aryDeskLimit = ["FW190"];

function setSVGElementXY(pElem, pX, pY) {
  let translate = 'translate(' + pX + ',' + pY + ')';
  pElem.setAttribute('transform', translate);
}

function getWidthHeight(svgElemId) {
  var svg1 = document.getElementById(svgElemId);

  var pathElem = svg1.getElementsByTagName("path");
  console.log(svg1);
  console.log(pathElem);
  console.log('width', svg1.getBoundingClientRect().width);
  console.log('height', svg1.getBoundingClientRect().height);
  //console.log('width', pathElem.getBoundingClientRect().width);

}

document.addEventListener("DOMContentLoaded", () => {
  console.log("Hello World!");
});

document.addEventListener("DOMContentLoaded", function (event) {
  var deskContainer = document.getElementsByClassName("deskContainer");
  var deskText = document.getElementsByClassName("deskText1");
  
  //console.log(deskContainer.length);
  var myFunction = function (event) {
    //var attribute = this.getAttribute("id");
    //alert(this.textContent);

    //console.log(event);

    var e = event.target;

    let elemId = event.srcElement.id;

    let deskId = "path" + elemId.replace("path", "");
let elementPolyline = document.getElementById(deskId);
  elementPolyline.classList.toggle("deskContainer-selected");

    //alert(deskId);

    //var dim = e.getBoundingClientRect();
    //var x = event.clientX - dim.left;
    //var y = event.clientY - dim.top;

  };
for (var i = 0; i < deskContainer.length; i++) {
    //console.log(deskContainer[i]);
    deskContainer[i].parentElement.addEventListener('click', myFunction, false);
  }
  
  for (var i = 0; i < deskText.length; i++) {
    deskText[i].parentElement.addEventListener('click', myFunction, false);
  }
});

function checkDeskExists(desk) {
  console.log('checking-' + desk + '-');
  let aryDesks = __aryDeskMoc1FirstFloor;
  var __FOUND = aryDesks.find(function (currentDesk, index) {
    if (currentDesk == desk)
      return true;
  });
  return __FOUND == desk;
}

function setTextElementId() {
  var textElements = document.getElementsByTagName("text");

  console.log(textElements);
  for (i = 0; i < textElements.length; i++) {
    //console.log(i);
    //console.log(textElements[i].textContent);
    var elemText = textElements[i].textContent;
    if (elemText.length == 0)
      continue;
    var checked = checkDeskExists(elemText)
    console.log(elemText + ' - ' + checked);
    if (checked) {
      textElements[i].setAttribute("id", elemText);
	  textElements[i].classList.add("elemdesk");
      var textNode = textElements[i].childNodes[0];
      textNode.nodeValue = elemText;
      //console.log(elemText + ' - ' + checked);
    }
  }
}


/***********************/
function deskParentPathSetIdCenterText() {
  var s = new XMLSerializer();

  var pathElements = document.getElementsByTagName("polyline");
  
  
  //var pathElements = ["pZF001","pZF002"];
  let aryDesks = __aryDeskMoc1FirstFloor;
  //let aryDesks = ["ZF001"];
  
  for (d=0;d < aryDesks.length; d++){
  
    var desk = document.getElementById(aryDesks[d]);


    if (desk != null) {
		console.log( aryDesks[d] + "-Desk found in html");
      //var deskParentNode = desk.parentNode;
      var deskNodeDimension = desk.getBoundingClientRect();

	  
      var strPathText = "NotFound";
      desk.setAttribute("class", "deskText1");
	  
      //deskParentNode.removeChild(desk);
      //console.log(pathElements.length);
      for (i = 0; i < pathElements.length; i++) {
        if (!pathElements[i].id.startsWith("skipPath")) {
		//if (true) {
			console.log("Inside polyline loop");
          //var pathElem = document.getElementById( pathElements[i]);
		  //if(pathElem == null)
			//  continue;
          //var pathParentNode = pathElem.parentNode;
          //var pathParentNodeDimension = pathParentNode.getBoundingClientRect();
          /*if(pathElements[i].id.startsWith("scrPrint"))
            console.log(pathElements[i]);*/
		//console.log("polyline boundingRect");
		//console.log(pathElem.getBoundingClientRect());
		pathElem = pathElements[i];
          var pathArea = pathElem.getBoundingClientRect();
		  //console.log(pathArea)
		//return;
		  //console.log("Text-Dimention");
		  //console.log(deskNodeDimension);
		  //console.log("Polyline-Dimention");
		  //console.log(pathArea);
		  //console.log("End");
		  //return;
		  
          if (deskNodeDimension.x >= truncate(pathArea.x, 0)
            && deskNodeDimension.y >= truncate(pathArea.y, 0)
            && truncate(deskNodeDimension.right, 0) <= pathArea.right
            && truncate(deskNodeDimension.bottom, 0) <= pathArea.bottom) {

            pathElem.setAttribute("id", "path" + aryDesks[d]);
            pathElem.setAttribute("class", "deskContainer");
            //pathElem.insertAdjacentElement('afterend', desk);

            //var x = (pathParentNodeDimension.x - deskNodeDimension.x) + (pathParentNodeDimension.width - deskNodeDimension.width) / 2;
            //var y = (pathParentNodeDimension.y - deskNodeDimension.y) + (pathParentNodeDimension.height - deskNodeDimension.height) / 2;
            //desk.setAttribute("transform", "translate(" + x + "," + y + ")");

            //strPathText = s.serializeToString(pathElem);
            //console.log(__aryDeskMoc1FirstFloor[d] + ' - ' + d);

          }
        }
      }
      console.log(aryDesks[d] + ' - ' + d + ' - ' + strPathText);

    }
    else {
      console.log(aryDesks[d] + '-NotDesk');
    }
  }
}


/***********************/
function deskParentPathSetId() {
  var s = new XMLSerializer();
  var lastGroupElem = document.getElementById("lastGroup");
  var pathElements = document.getElementsByTagName("path");
  let aryDesks = __aryDeskMoc1FirstFloor;
  //for (d=0;d < __aryDeskMoc1FirstFloor.length; d++){
  for (d = 0; d < aryDesks.length; d++) {
    var desk = document.getElementById(aryDesks[d]);

    if (desk) {
      var deskParentNode = desk.parentNode;
      var deskArea = desk.getBoundingClientRect();
      var strPathText = "NotFound";
      //deskParentNode.removeChild(desk);
      console.log(desk);
      for (i = 0; i < pathElements.length; i++) {
        if (!pathElements[i].id.startsWith("skipPath")) {
          var pathElem = pathElements[i];
          /*if(pathElements[i].id.startsWith("scrPrint"))
            console.log(pathElements[i]);*/
          var pathArea = pathElem.getBoundingClientRect();
          if (deskArea.x >= truncate(pathArea.x, 0)
            && deskArea.y >= truncate(pathArea.y, 0)
            && truncate(deskArea.right, 0) <= pathArea.right
            && truncate(deskArea.bottom, 0) <= pathArea.bottom) {
            pathElem.setAttribute("id", "path" + aryDesks[d]);
            pathElem.setAttribute("class", "deskContainer");
            lastGroupElem.insertAdjacentElement('afterend', deskParentNode);
            strPathText = s.serializeToString(pathElem);
            //console.log(__aryDeskMoc1FirstFloor[d] + ' - ' + d);
          }
        }
      }

      console.log(aryDesks[d] + ' - ' + d + ' - ' + strPathText);
      desk.classList.add("deskText");
    }
    else {
      console.log(aryDesks[d] + '-NotDesk');
    }
  }
}


/***********************/
function shiftTextElemToEnd() {
  var s = new XMLSerializer();

  var pathElements = document.getElementsByTagName("path");
  let aryDesks = __aryDeskMoc1FirstFloor;
  //for (d=0;d < __aryDeskMoc1FirstFloor.length; d++){
  for (d = 0; d < aryDesks.length; d++) {
    var desk = document.getElementById(aryDesks[d]);
    var lastElem = document.getElementById("lastGroupWithTextElem");
    if (desk) {
      var deskParentNode = desk.parentNode;
      var deskArea = desk.getBoundingClientRect();
      //var strPathText = "NotFound";
      //deskParentNode.removeChild(desk);
      console.log(desk);
      for (i = 0; i < pathElements.length; i++) {
        if (!pathElements[i].id.startsWith("skipPath")) {
          var pathElem = pathElements[i];
          /*if(pathElements[i].id.startsWith("scrPrint"))
            console.log(pathElements[i]);*/
          var pathArea = pathElem.getBoundingClientRect();
          if (deskArea.x >= truncate(pathArea.x, 0)
            && deskArea.y >= truncate(pathArea.y, 0)
            && truncate(deskArea.right, 0) <= pathArea.right
            && truncate(deskArea.bottom, 0) <= pathArea.bottom) {
            pathElem.setAttribute("id", "path" + aryDesks[d]);
            pathElem.setAttribute("class", "deskContainer");
            var parNode = desk.parentNode;
            lastElem.insertAdjacentElement('afterend', deskParentNode);
            //strPathText = s.serializeToString(pathElem);
            //console.log(__aryDeskMoc1FirstFloor[d] + ' - ' + d);
          }
        }
      }
      //console.log(aryDesks[d] + ' - ' + d + ' - ' + strPathText);

    }
    else {
      console.log(aryDesks[d] + '-NotDesk');
    }
  }
}


function truncate(num, places) {
  return Math.trunc(num * Math.pow(10, places)) / Math.pow(10, places);
}

/*
function customPanByZoomAtEnd(amount, endZoomLevel, animationTime){ // {x: 1, y: 2}
  if(typeof animationTime == "undefined"){
      animationTime =   300; // ms
  }
  var animationStepTime = 15 // one frame per 30 ms
    , animationSteps = animationTime / animationStepTime
    , animationStep = 0
    , intervalID = null
    , stepX = amount.x / animationSteps
    , stepY = amount.y / animationSteps;

  intervalID = setInterval(function(){
    if (animationStep++ < animationSteps) {
      panZoomInstance.panBy({x: stepX, y: stepY})
    } else {
      // Cancel interval
      if(typeof endZoomLevel != "undefined"){
        var viewPort = $(".svg-pan-zoom_viewport")[0];
        viewPort.style.transition = "all " + animationTime / 1000 + "s ease";
        panZoomInstance.zoom(endZoomLevel);
        setTimeout(function(){
            viewPort.style.transition = "none";
            $("svg")[0].style.pointerEvents = "all"; // re-enable the pointer events after auto-panning/zooming.
                    panZoomInstance.enablePan();
                    panZoomInstance.enableZoom();
                    panZoomInstance.enableControlIcons();
                    panZoomInstance.enableDblClickZoom();
                    panZoomInstance.enableMouseWheelZoom();
        }, animationTime + 50);
      }
      clearInterval(intervalID)
    }
  }, animationStepTime)
}

function panToElem(targetElem) {

    var initialSizes = panZoomInstance.getSizes();
    var initialLoc = panZoomInstance.getPan();
    var initialBounds = targetElem.getBoundingClientRect();
    var initialZoom = panZoomInstance.getZoom();
    var initialCX = initialBounds.x + (initialBounds.width / 2);
    var initialCY = initialBounds.y + (initialBounds.height / 2);

    var dX = (initialSizes.width / 2) - initialCX;
    var dY = (initialSizes.height / 2) - initialCY;

  customPanByZoomAtEnd({x: dX, y: dY}, 2, 700);
}
*/

function zoomToPathWithID(id) {
  var panZoom = svgPanZoom('#demo-tiger');
  //FE075
  //var elemId="shape11967-32548";
  panZoom.reset();

  //REM: Apparently the values need some times to adjust after reset() is called, yet is seems to have no callback.
  window.setTimeout(function () {
    var tViewport = document.querySelector('g.svg-pan-zoom_viewport');

    var tMatrix = tViewport.transform.baseVal.getItem(0).matrix;

    var tBBox = document.getElementById(id).getBBox();
    console.log(tBBox.x);
    console.log(tBBox.width);
    var tPoint = { x: (tBBox.x + tBBox.width / 2) * tMatrix.a + tMatrix.e, y: (tBBox.y + tBBox.height / 2) * tMatrix.d + tMatrix.f }

    panZoom.pan(tPoint);

    //REM: Approximate values, I leave the exact calculation up to you.
    panZoom.zoomAtPoint(2, tPoint);
  }, 500)
}
function zoomToTextElement(elemId) {
  var highlightClassName = "highlightpath";
  removeClass(highlightClassName);

  var panZoomInstance = svgPanZoom('#demo-tiger');
  panZoomInstance.reset();

  var svgSize = panZoomInstance.getSizes();
  var svgPanPos = panZoomInstance.getPan();
  var elemBCR = document.getElementById(elemId).getBoundingClientRect();
  var panX = svgPanPos.x;
  var panY = svgPanPos.y;
  
  console.log("svg size");
  console.log(svgSize);
  console.log("pan pos");
  console.log(svgPanPos);
  console.log("elem bounding client rect");
  console.log(elemBCR);
  
  if (elemBCR.x >= svgSize.width) {
    panX = svgSize.width - (elemBCR.x + 20 + 30) + panX;
  }
  else if(elemBCR.x > panX && elemBCR.x < 0){
	  panX = elemBCR.x - panX;
  }

  if (elemBCR.bottom >= svgSize.height) {
    panY = svgSize.height - (elemBCR.y) + panY;
  }
  console.log("PanX:" + panX + " - " + "PanY: " + panY);
  panZoomInstance.pan({ x: panX, y: panY });

  bcr = document.getElementById(elemId).getBoundingClientRect();
  x = bcr.right + 10;
  y = bcr.bottom + 20;
  panZoomInstance.zoomAtPointBy(1.4, { x: x, y: y });

  var pathId = "path" + elemId;
  var pathElem = document.getElementById(pathId);
  pathElem.classList.add(highlightClassName);
}

function removeClass(className) {
  var elements = document.getElementsByClassName(className);
  for (i = 0; i < elements.length; i++) {
    var elem = elements[i];
    elem.classList.remove(className);
  }
}

function getPosition(element) {
  var match, transform, x, y;
  transform = element.getAttribute('transform');
  if (transform != null) {
    match = transform.match(/translate\(\s*(-?[\d.]*)\s*[,]\s*(-?[\d.]*)\s*/);
  }
  if ((match != null ? match.length : void 0) >= 2) {
    x = parseFloat(match[1]);
    y = parseFloat(match[2]);
  } else {
    x = element.getAttribute('x');
    y = element.getAttribute('y');
  }
  if (x == null) {
    x = 0;
  }
  if (y == null) {
    y = 0;
  }
  return {
    x: x,
    y: y
  };
}

function findAbsolutePosition(element) {
  var abspos, pos;
  abspos = {
    x: 0,
    y: 0
  };
  while ((element.getAttribute != null)) {
    pos = getPosition(element);
    if (pos && typeof pos.x === 'number') {
      abspos.x += pos.x;
      abspos.y += pos.y;
    }
    element = element.parentNode;
  }
  return abspos;
}


function getViewBox() {
  var svgs = document.getElementsByTagName("svg");
  var svg = svgs[0];
  box = svg.getBBox(); // <- get the visual boundary required to view all children
  console.log(box);
  //viewBox = [box.x, box.y, box.width, box.height].join(" ");

  // set viewable area based on value above
  //svg.setAttribute("viewBox", viewBox);
}


const optimizedResize = (function () {

  var callbacks = [],
    running = false;

  // fired on resize event
  function resize() {
    if (!running) {
      running = true;
      if (window.requestAnimationFrame) {
        window.requestAnimationFrame(runCallbacks);
      } else {
        setTimeout(runCallbacks, 66);
      }
    }

  }

  // run the actual callbacks
  function runCallbacks() {

    callbacks.forEach(function (callback) {
      callback();
    });

    running = false;
  }

  // adds callback to loop
  function addCallback(callback) {

    if (callback) {
      callbacks.push(callback);
    }

  }

  return {
    // public method to add additional callback
    add: function (callback) {
      if (!callbacks.length) {
        window.addEventListener('resize', resize);
      }
      addCallback(callback);
    }
  }
}());


function setSVGElementXY(pElem, pX, pY) {
  let translate = 'translate(' + pX + ',' + pY + ')';
  pElem.setAttribute('transform', translate);
}

function getWidthHeight(svgElemId) {
  var svg1 = document.getElementById(svgElemId);

  var pathElem = svg1.getElementsByTagName("path");
  console.log(svg1);
  console.log(pathElem);
  console.log('width', svg1.getBoundingClientRect().width);
  console.log('height', svg1.getBoundingClientRect().height);
  //console.log('width', pathElem.getBoundingClientRect().width);

}

function onMouseMove(evt) {
  const { clientX, clientY } = evt || { clientX: 0, clientY: 0 }
  point.x = clientX;
  point.y = clientY;
  let useCTMTransform = '';
  let transformedCoordinate = `(${Math.round(point.x)}, ${Math.round(point.y)})`;

  if (true) {
    point = point.matrixTransform(svg.getScreenCTM().inverse());
    transformedCoordinate = `(${Math.round(point.x)}, ${Math.round(point.y)})`;
    useCTMTransform = `\n  point = point.matrixTransform(eleSvg.getScreenCTM().inverse());
  // point = ${transformedCoordinate}`
  }
  console.log(point);
  console.log(transformedCoordinate);
  /*
  eleDynText.setAttribute('x', point.x+15);
  eleDynText.setAttribute('y', point.y+25);
  eleDynText.innerHTML = transformedCoordinate;
  svgClientX.setAttribute('cx', point.x);
  svgClientX.setAttribute('cy', point.y);
  eleCode.innerHTML = `<pre>const eleSvg = document.querySelector('svg');
eleSvg.addEventListener('mousemove', ({clientX, clientY}) => {
  let point = eleSvg.createSVGPoint();
  point.x = clientX; // ${clientX}
  point.y = clientY; // ${clientY}${useCTMTransform}\n})</pre>`
  */
}

//var ctm = document.querySelector('.ctm'),
//var svg = document.getElementById('demo-tiger');
//console.log(svg);
//ctmcode = document.querySelector('.ctmcode'),
//eleCode = document.querySelector('.usedCode'),
//eleDynText = document.querySelector('#dynText');

//svg.addEventListener('mousemove', onMouseMove);
//var point = svg.createSVGPoint();
//onMouseMove();


/*
var svg = document.getElementById('demo-tiger');
svg.addEventListener('mousemove', onMouseMove);
var point = svg.createSVGPoint();
onMouseMove();



var elem = document.getElementById("shape11984-32585");
elem.getBoundingClientRect();
DOMRect {x: 1368.5443115234375, y: 472.7870788574219, width: 29.853271484375, height: 22.39813232421875, top: 472.7870788574219, …}

var panZoom = svgPanZoom('#demo-tiger');
panZoom.getSizes();
svg{width: 1152, height: 576, realZoom: 1.6457142658283153, viewBox: {…}}

panZoom.getPan();
{x: -123.42857142857144, y: -279.7714285714286}

1152 - (1368 + 30 + 20) + (-123) = -407




panZoom.getPan();
svgPan{x: -123.42857142857144, y: -279.7714285714286}

setPan = svgPan.x + ( svg.width - (elem.x + elem.width))
panZoom.pan({x:-370, y:-280});
elem.getBoundingClientRect();

*/


function addListerOnContaierClick(){
        $(".deskContainer").on('click', function () {
                $(this).toggleClass("deskContainer-selected");
        });

        }

        function addListerOnDeskClick(){
        $(".deskText1").on('click', function () {
            let deskId = $(this).text();
            let selectedDeskContainer = "#path" + deskId;
                $(selectedDeskContainer).toggleClass("deskContainer-selected");
        });

        }